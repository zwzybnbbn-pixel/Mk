<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
<meta charset="UTF-8">
<title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†</title>

<style>
  body {
    font-family: sans-serif;
    padding: 20px;
    background: #f7f7f7;
  }

  h2, h3 {
    margin-bottom: 15px;
  }

  .form-box {
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 3px 10px #00000020;
    margin-bottom: 30px;
  }

  label { display: block; margin-top: 10px; }
  input, select, textarea {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    border-radius: 6px;
    border: 1px solid #ccc;
  }

  button {
    padding: 12px;
    margin-top: 15px;
    background: #00796B;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 17px;
  }

  button:hover { background: #00695C; }

  .logout {
    background: #b71c1c !important;
  }

  .success {
    color: green;
    margin-top: 10px;
    font-weight: bold;
  }
</style>
</head>

<body>

<h2>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†</h2>

<button id="logoutBtn" class="logout">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>

<hr><br>

<!-- ===================== Ø¥Ø¶Ø§ÙØ© Ø·Ø¨ÙŠØ¨ ===================== -->
<div class="form-box">
  <h3>â• Ø¥Ø¶Ø§ÙØ© Ø·Ø¨ÙŠØ¨ Ø¬Ø¯ÙŠØ¯</h3>

  <label>Ø§Ø³Ù… Ø§Ù„Ø·Ø¨ÙŠØ¨:</label>
  <input id="d_name">

  <label>Ø§Ù„ØªØ®ØµØµ:</label>
  <input id="d_specialty">

  <label>Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰:</label>
  <input id="d_hospital">

  <label>Ø£ÙŠØ§Ù… Ø§Ù„Ø¯ÙˆØ§Ù…:</label>
  <input id="d_days">

  <label>Ø§Ù„Ø£ÙˆÙ‚Ø§Øª:</label>
  <input id="d_times">

  <label>Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ø±Ø§Ø¨Ø· Ø®Ø±Ø§Ø¦Ø· Google):</label>
  <input id="d_location">

  <button id="addDoctorBtn">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø¨ÙŠØ¨</button>
  <div id="doctorStatus"></div>
</div>

<!-- ===================== Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ´ÙÙ‰ ===================== -->
<div class="form-box">
  <h3>ğŸ¥ Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ´ÙÙ‰ Ø¬Ø¯ÙŠØ¯</h3>

  <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰:</label>
  <input id="h_name">

  <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</label>
  <input id="h_address">

  <label>Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø±ÙŠØ·Ø©:</label>
  <input id="h_location">

  <label>Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (1 â€“ 5):</label>
  <input id="h_rating" type="number" min="1" max="5">

  <button id="addHospitalBtn">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰</button>
  <div id="hospitalStatus"></div>
</div>

<script type="module">

/* =========================
    Ø­Ù…Ø§ÙŠØ© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
========================= */
import { auth, onAuthStateChanged, signOut } from "./firebase-config.js";

onAuthStateChanged(auth, user => {
  if (!user) {
    window.location.href = "login.html"; // Ø·Ø±Ø¯ Ø£ÙŠ Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø³Ø¬Ù„
  }
});

/* Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ */
document.getElementById("logoutBtn").onclick = () => {
  signOut(auth);
};


/* =========================
    Firestore
========================= */
import { db } from "./firebase-config.js";
import { collection, addDoc } 
from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";



/* ========== Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø¨ÙŠØ¨ ========== */
document.getElementById("addDoctorBtn").onclick = async function () {

  const name = document.getElementById("d_name").value;
  const specialty = document.getElementById("d_specialty").value;
  const hospital = document.getElementById("d_hospital").value;
  const days = document.getElementById("d_days").value;
  const times = document.getElementById("d_times").value;
  const location = document.getElementById("d_location").value;

  if (!name || !specialty || !hospital) {
    alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");
    return;
  }

  await addDoc(collection(db, "doctors"), {
    name,
    specialty,
    hospital,
    days,
    times,
    location
  });

  document.getElementById("doctorStatus").innerHTML =
    "<p class='success'>âœ”ï¸ ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø¨Ù†Ø¬Ø§Ø­</p>";
};



/* ========== Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ ========== */
document.getElementById("addHospitalBtn").onclick = async function () {

  const name = document.getElementById("h_name").value;
  const address = document.getElementById("h_address").value;
  const location = document.getElementById("h_location").value;
  const rating = document.getElementById("h_rating").value;

  if (!name || !address) {
    alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");
    return;
  }

  await addDoc(collection(db, "hospitals"), {
    name,
    address,
    location,
    rating
  });

  document.getElementById("hospitalStatus").innerHTML =
    "<p class='success'>âœ”ï¸ ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ Ø¨Ù†Ø¬Ø§Ø­</p>";
};

</script>

</body>
</html>
