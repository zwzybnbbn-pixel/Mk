<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>دليل أطباء - الرئيسية</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header class="topbar">
  <div class="brand">دليل أطباء شبوة</div>
  <button class="menu-btn" onclick="toggleMenu()">☰</button>
  <nav id="menu" class="menu">
    <a href="index.html">الرئيسية</a>
    <a href="doctors.html">الأطباء</a>
    <a href="contact.html">تواصل</a>
    <a href="complaint.html">شكاوى</a>
    <a href="support.html">الدعم</a>
  </nav>
</header>

<main class="container">

  <!-- مربع البحث الرئيسي -->
  <section class="hero">
    <p style="color:#002855;">استغفر الله</p>
<p style="color:#002855;">اللهم صل وسلم على نبينا محمد</p>
    <div class="search-box">
      <input id="homeSearch" type="search" placeholder="اكتب اسم الطبيب أو التخصص..." />
    </div>
  </section>

  <!-- الفلاتر والنتائج -->
  <section class="search-results">

    <section id="cards" class="cards-grid"></section>

    <div id="noresult" class="noresult" style="display:none;">لم يتم العثور على نتائج</div>
  </section>
  <section class="features">
    <div class="card-sm"><h3>بحث سريع</h3><p>اكتب اسم الطبيب وستجد معلوماته فوراً.</p></div>
    <div class="card-sm"><h3>صفحات شخصية</h3><p>كل طبيب له صفحة تحتوي التخصص والمستشفى ودوامه.</p></div>
    <div class="card-sm"><h3>تواصل مباشر</h3><p>فتح واتساب أو إرسال شكوى بسهولة.</p></div>
  </section>
</main>

<footer class="footer">
<p style="background: linear-gradient(90deg, #d4af37, #f7e27f);
    -webkit-background-clip: text;
    color: transparent;">
    تحت إشراف م/ماجد قاسم حسن مبارك بن عمرو
</p>
  <p>© 2025 — دليل أطباء شبوة</p>
</footer>

<!-- ملفات البيانات والسكربت -->
<script src="doctors-data.js"></script>
<script src="script.js"></script>

<!-- سكربت تشغيل البحث بشكل صحيح -->
<script>
document.addEventListener("DOMContentLoaded", function () {

    populateFilters();  

    // input البحث
    const homeSearch = document.getElementById("homeSearch");

    // input مخفي يستخدمه سكربت الفلترة الأصلي
    const hiddenInput = document.createElement("input");
    hiddenInput.id = "searchInput";
    hiddenInput.type = "hidden";
    document.body.appendChild(hiddenInput);

    const cards = document.getElementById("cards");
    const noResult = document.getElementById("noresult");

    // ❌ عند فتح الصفحة: لا نعرض أي طبيب
    cards.innerHTML = "";
    noResult.style.display = "none";

    // ✔ عند الكتابة في البحث
    homeSearch.addEventListener("input", function () {

        const text = this.value.trim();

        hiddenInput.value = text;

        if (text === "") {
            // إذا كانت خانة البحث فارغة → لا تظهر النتائج
            cards.innerHTML = "";
            noResult.style.display = "none";
            return;
        }

        loadCardsFiltered(); 
    });

    // تشغيل الفلاتر فقط عند وجود نص مكتوب
    document.getElementById("filterSpecialty").addEventListener("change", function () {
        if (homeSearch.value.trim() !== "") loadCardsFiltered();
    });

    document.getElementById("filterHospital").addEventListener("change", function () {
        if (homeSearch.value.trim() !== "") loadCardsFiltered();
    });

});
</script>

</body>
</html>
