<!doctype html>
<html lang="ar" dir="rtl">  
<head>  
  <style>
  body { visibility: hidden; }
  </style>
  <script type="module">
  import { auth } from "./firebase-config.js";
  import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

  // ๐ ุฅุฎูุงุก ุงูุตูุญุฉ ุจุงููุงูู ุญุชู ูุชู ุงูุชุญูู
  document.documentElement.style.visibility = "hidden";

  onAuthStateChanged(auth, (user) => {
    if (!user) {
      // โ ุบูุฑ ูุณุฌู โ ุฑุฌูุน
      window.location.href = "login.html";
    } else {
      // โ๏ธ ูุณุฌู ุฏุฎูู โ ุฅุธูุงุฑ ุงูุตูุญุฉ
      document.body.style.visibility = "visible";
    }
  });
  </script>
<meta charset="utf-8" />  
<meta name="viewport" content="width=device-width,initial-scale=1" />  
<title>ููุญุฉ ุงูุชุญูู โ Dashboard</title>  
<link rel="stylesheet" href="dashboard.css">  
</head>  
<body> 

  <div class="app">  

    <!-- Sidebar -->  
    <aside class="sidebar">  
      <div class="brand">ุฏููู ุงูุฃุทุจุงุก โ ููุญุฉ ุงูุฅุฏุงุฑุฉ</div>  
      <nav>  
        <button id="navDashboard" class="nav-item active">ููุญุฉ ุงูุชุญูู</button>  
        <button id="navDoctors" class="nav-item">ูุงุฆูุฉ ุงูุฃุทุจุงุก</button>  
        <button id="navHospitals" class="nav-item">ุงููุณุชุดููุงุช</button>  
      </nav>  
      <div class="spacer"></div>  
      <div class="sidebar-foot">  
        <button id="logout" class="btn-logout">ุชุณุฌูู ุฎุฑูุฌ</button>  
      </div>  
    </aside>



<!-- MAIN -->  
<main class="main">  

  <header class="topbar">  
    <div class="title" id="pageTitle">ููุญุฉ ุงูุชุญูู</div>  
    <div class="actions" id="topActions">  
      <button id="openAddDoctor" class="btn">+ ุฅุถุงูุฉ ุทุจูุจ</button>  
      <button id="openAddHospital" class="btn hidden">+ ุฅุถุงูุฉ ูุณุชุดูู</button>  
    </div>  
  </header>  


  <section class="content">  

    <!-- Dashboard stats -->  
    <div id="dashboardStats">  
      <div class="stats">  
        <div class="card stat">  
          <div class="stat-num" id="totalDoctors">0</div>  
          <div class="stat-label">ุนุฏุฏ ุงูุฃุทุจุงุก</div>  
        </div>  
        <div class="card stat">  
          <div class="stat-num" id="totalHospitals">0</div>  
          <div class="stat-label">ุนุฏุฏ ุงููุณุชุดููุงุช</div>  
        </div>  
      </div>  
    </div>



    <!-- Doctors table -->  
    <div id="doctorsSection" class="hidden">  
      <div class="controls">  
        <input id="searchDoctors" placeholder="ุจุญุซ ุจุงูุงุณู ุฃู ุงูุชุฎุตุต..." />  
      </div>  

      <div class="table-wrap">  
        <table class="table">  
          <thead>  
            <tr>
              <th>ุงูุงุณู</th>
              <th>ุงูุชุฎุตุต</th>
              <th>ุงููุณุชุดูู</th>
              <th>ุงูุฃูุงู</th>
              <th>ุงูุฃููุงุช</th>
              <th>ุฅุฌุฑุงุกุงุช</th>
            </tr>  
          </thead>  
          <tbody id="doctorsTbody"></tbody>  
        </table>  
      </div>  
    </div>



    <!-- Hospitals table -->  
    <div id="hospitalsSection" class="hidden">  
      <div class="controls">  
        <input id="searchHospitals" placeholder="ุจุญุซ ุจุงุณู ุงููุณุชุดูู..." />  
      </div>  

      <div class="table-wrap">  
        <table class="table">  
          <thead>  
            <tr>
              <th>ุงูุงุณู</th>
              <th>ุงููุฏููุฉ</th>
              <th>ุงููุงุชู</th>
              <th>ุฅุฌุฑุงุกุงุช</th>
            </tr>  
          </thead>  
          <tbody id="hospitalsTbody"></tbody>  
        </table>  
      </div>  
    </div>

  </section>  
</main>



<!-- Doctor Modal -->  
<div id="doctorModal" class="modal hidden">  
  <div class="modal-card">  
    <h3 id="doctorModalTitle">ุฅุถุงูุฉ ุทุจูุจ</h3>  
    <form id="doctorForm">  

      <input id="d_name" placeholder="ุงุณู ุงูุทุจูุจ" required />  
      <input id="d_specialty" placeholder="ุงูุชุฎุตุต" required />  
      <input id="d_phone" placeholder="ุฑูู ุงููุงุชู" required />  
      <input id="d_hospital" placeholder="ุงููุณุชุดูู" required />  

      <label>ุฑุงุจุท ุตูุฑุฉ ุงูุทุจูุจ (RAW URL)</label>
      <label>ุฑุงุจุท ุงููููุน ุนูู ุงูุฎุฑูุทุฉ (Google Maps):</label>
<input type="text" id="map" placeholder="ูุซุงู: https://maps.app.goo.gl/xxxxxx">
      <input id="d_img" placeholder="https://i.postimg.cc/...">
      <img id="d_preview" style="width:90px;height:90px;border-radius:50%;display:none;margin:10px auto;object-fit:cover;">

      <h4 style="margin-top:15px">ุฌุฏูู ุงูุฏูุงู</h4>  

      <input id="sat" placeholder="ุงูุณุจุช" />  
      <input id="sun" placeholder="ุงูุฃุญุฏ" />  
      <input id="mon" placeholder="ุงูุงุซููู" />  
      <input id="tue" placeholder="ุงูุซูุงุซุงุก" />  
      <input id="wed" placeholder="ุงูุฃุฑุจุนุงุก" />  
      <input id="thu" placeholder="ุงูุฎููุณ" />  
      <input id="fri" placeholder="ุงูุฌูุนุฉ" />  

      <div class="modal-actions">  
        <button type="submit" class="btn primary">ุญูุธ</button>  
        <button type="button" id="closeDoctorModal" class="btn">ุฅูุบุงุก</button>  
      </div>  
    </form>  
  </div>
</div>



<!-- Hospital Modal -->  
<div id="hospitalModal" class="modal hidden">  
  <div class="modal-card">  
    <h3 id="hospitalModalTitle">ุฅุถุงูุฉ ูุณุชุดูู</h3>  
    <form id="hospitalForm">  

      <input id="h_name" placeholder="ุงุณู ุงููุณุชุดูู" required />
<input id="h_city" placeholder="ุงููุฏููุฉ" required />
<input id="h_phone" placeholder="ุงููุงุชู" required />
<input id="h_department" placeholder="ุงูุฃูุณุงู" />
<textarea id="h_description" placeholder="ูุตู ุงููุณุชุดูู" style="height:90px"></textarea>

<label>ุฑุงุจุท ุตูุฑุฉ ุงููุณุชุดูู (RAW URL)</label>
<input id="h_img" placeholder="https://i.postimg.cc/...">
<img id="h_preview" style="width:120px;height:120px;border-radius:10px;display:none;margin:10px auto;object-fit:cover;">

<label>ุฑุงุจุท ุงููููุน ุนูู ุงูุฎุฑูุทุฉ (Google Maps):</label>
<input type="text" id="h_map" placeholder="ูุซุงู: https://maps.app.goo.gl/xxxxxx">

<div class="modal-actions">
  <button type="submit" class="btn primary">ุญูุธ</button>
  <button type="button" id="closeHospitalModal" class="btn">ุฅูุบุงุก</button>
</div>
    </form>  
  </div>
</div>



<!-- Confirm Delete -->  
<div id="confirm" class="modal hidden">  
  <div class="modal-card">  
    <h3>ุชุฃููุฏ ุงูุญุฐู</h3>  
    <p>ูู ุชุฑูุฏ ุญุฐู ูุฐุง ุงูุนูุตุฑุ</p>  
    <div style="display:flex;gap:8px;justify-content:center;margin-top:12px">  
      <button id="confirmYes" class="btn primary">ูุนูุ ุงุญุฐู</button>  
      <button id="confirmNo" class="btn">ุฅูุบุงุก</button>  
    </div>  
  </div>
</div>



<script type="module" src="dashboard.js"></script>

<script>
// ูุนุงููุฉ ุตูุฑ ุงูุทุจูุจ
document.getElementById("d_img").addEventListener("input", e=>{
  let url = e.target.value.trim();
  let img = document.getElementById("d_preview");
  if(url.length>3){ img.src=url; img.style.display="block"; }
  else img.style.display="none";
});

// ูุนุงููุฉ ุตูุฑ ุงููุณุชุดูู
document.getElementById("h_img").addEventListener("input", e=>{
  let url = e.target.value.trim();
  let img = document.getElementById("h_preview");
  if(url.length>3){ img.src=url; img.style.display="block"; }
  else img.style.display="none";
});
</script>

</body>
    </html>





