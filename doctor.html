<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>بيانات الدكتور</title>

<style>
    body {
        font-family: sans-serif;
        background:#f2f2f2;
        padding:20px;
    }

    .doctor-card {
        background:white;
        padding:20px;
        border-radius:10px;
        box-shadow:0 0 10px #ccc;
        max-width:700px;
        margin:auto;
    }

    table {
        width:100%;
        border-collapse: collapse;
        margin-top:20px;
    }
    th, td {
        padding:10px;
        border:1px solid #ddd;
        text-align:center;
        font-size:18px;
    }

    th {
        background:#0077ff;
        color:white;
    }
</style>
</head>

<body>

<div class="doctor-card">
    <h2 id="doctorName">اسم الدكتور</h2>
    <p><strong>التخصص:</strong> <span id="doctorSpec"></span></p>
    <p><strong>الهاتف:</strong> <span id="doctorPhone"></span></p>

    <h3 style="margin-top:20px;">جدول الدوام</h3>

    <table>
        <thead>
            <tr>
                <th>اليوم</th>
                <th>المستشفى</th>
                <th>الوقت</th>
            </tr>
        </thead>
        <tbody id="scheduleTable"></tbody>
    </table>
</div>

<script type="module">
import { db } from "./firebase-config.js";
import { doc, getDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

// قراءة ID من الرابط
const urlParams = new URLSearchParams(window.location.search);
const docId = urlParams.get("id");

async function loadDoctor() {
    const ref = doc(db, "doctors", docId);
    const snap = await getDoc(ref);

    if (!snap.exists()) {
        alert("البيانات غير موجودة");
        return;
    }

    const data = snap.data();

    document.getElementById("doctorName").textContent = data.name;
    document.getElementById("doctorSpec").textContent = data.specialty;
    document.getElementById("doctorPhone").textContent = data.phone;

    const schedule = data.schedule;
    const daysOrder = ["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];
    const daysArabic = {
        sunday: "الأحد",
        monday: "الاثنين",
        tuesday: "الثلاثاء",
        wednesday: "الأربعاء",
        thursday: "الخميس",
        friday: "الجمعة",
        saturday: "السبت"
    };

    let rows = "";

    daysOrder.forEach((day) => {
        const d = schedule[day];
        rows += `
            <tr>
                <td>${daysArabic[day]}</td>
                <td>${d?.hospital || "-"}</td>
                <td>${d?.time || "-"}</td>
            </tr>
        `;
    });

    document.getElementById("scheduleTable").innerHTML = rows;
}

loadDoctor();
</script>

</body>
</html>
