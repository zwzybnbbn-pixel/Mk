<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ملف الدكتور</title>
<link rel="stylesheet" href="style.css">

<style>
  body { font-family: sans-serif; background:#f7f7f7; padding:20px; }
  .profile-card{
    background:white; padding:20px; border-radius:12px; 
    box-shadow:0 3px 10px rgba(0,0,0,0.1);
  }
  .btn{
    display:inline-block; padding:8px 14px; background:#009688;
    color:white; border-radius:6px; text-decoration:none; margin-top:10px;
  }
  table{
    width:100%; border-collapse:collapse; margin-top:15px;
  }
  table th, table td{
    border:1px solid #ddd; padding:8px; text-align:center;
  }
  table th{ background:#eee; }
</style>
</head>

<body>

<h2>الملف الشخصي للطبيب</h2>

<div id="profile">
  <p>جاري التحميل...</p>
</div>

<script src="doctors-data.js"></script>

<script>
const params = new URLSearchParams(window.location.search);
const id = params.get("id");
const doctor = doctors.find(d => d.id == id);

function createScheduleTable(schedule){
    let rows = "";
    
    Object.keys(schedule).forEach(day => {
        const s = schedule[day];
        const timesText = s.times.join(" و ");  // دمج الأوقات
        
        rows += `
            <tr>
                <th>${day}</th>
                <td>${s.place}</td>
                <td>${timesText}</td>
            </tr>
        `;
    });
    
    return `
        <table>
            <tr>
                <th>اليوم</th>
                <th>مكان الدوام</th>
                <th>الوقت</th>
            </tr>
            ${rows}
        </table>
    `;
}

if(doctor){
    document.getElementById("profile").innerHTML = `
        <div class="profile-card">
            <h2>${doctor.name}</h2>

            <p><strong>التخصص:</strong> ${doctor.specialty}</p>

            <h3>جدول الدوام</h3>
            ${createScheduleTable(doctor.schedule)}

            <p><strong>الهاتف:</strong> ${doctor.phone}</p>
            <p>${doctor.bio}</p>

            <a class="btn" href="doctors.html">عودة</a>
        </div>
    `;
} else {
    document.getElementById("profile").innerHTML = `
        <div class="profile-card">
            <h3>لم يتم العثور على بيانات الطبيب</h3>
            <a class="btn" href="doctors.html">رجوع</a>
        </div>
    `;
}
</script>
